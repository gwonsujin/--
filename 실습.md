설명 요약(발표용 상황 설명에 쓸 수 있게):

버튼 이벤트 로직 업데이트

B1(Val+): 현재 단계(step)에 따라 값 증가.

step 0: 모드 1→2→3→1 순환

step 1: 운동 시간 +10초

step 2: 휴식 시간 +5초

step 3: 세트 수 +1

B3(Val-): 역방향으로 값 감소.

step 0: 모드 1←2←3←1 순환

나머지는 최소값(운동 10초, 휴식 5초, 세트 1세트)까지 감소.

B2(Next):

모드 1·2일 때: 메뉴 step을 앞으로 넘기다가 마지막에서 운동 시작.

모드 3일 때: 운동 대신 온습도 모니터 모드(run_env_monitor)로 진입.

B4(Prev / Stop):

짧게: 메뉴에서 한 단계 뒤로 이동.

길게(1.5초 이상): 프로그램 전체 종료.

운동 중에는 STOP_BUTTON_PIN으로 동작해서 세트 도중에도 운동 전체를 중단할 수 있음.

온습도 코드 통합 (humid.py 내용 반영)

D7 포트에 연결된 DHT 센서로 온도·습도 측정: temp, hum = dht(DHT_PORT, DHT_TYPE)

classify_env(temp, hum) 함수로

18~22℃ & 40~60% → GOOD

15~27℃ & (30~40% 또는 60~70%) → MODERATE

나머지 → BAD

run_env_monitor()

모드 선택 화면에서 Mode 3을 선택한 상태에서 B2를 누르면 진입.

LCD에 상태(Status: GOOD/MODERATE/BAD)와 온·습도 값을 실시간으로 출력.

B2를 다시 누르면 메뉴 화면으로 복귀.

이 부분은 기존 운동 로직과 완전히 분리된 “3번째 모드”라서, 발표 때 “운동 보조 기능(환경 체크 모드)”라고 설명 가능.

레벨 시스템 (게임 느낌)

운동 세트를 시작할 때,

total_exercise_time = 운동시간 * 세트 수 로 계산.

세션이 정상적으로 끝나면 이 total_exercise_time 을 레벨 시스템에 넘김.

레벨 계산 규칙:

0~99초 → 레벨 0

100~199초 → 레벨 1

…

900~999초 → 레벨 9

1000초 이상 → 레벨 10 취급, LCD에는 “GOOD JOB” 코멘트 출력.

exercise_record.txt 파일에 지금까지의 최고 기록(best_total_time)을 저장해서

프로그램을 다시 실행해도 최고 기록이 유지됨.

운동이 끝날 때:

이번 total_exercise_time 이 최고 기록보다 크면 “New! xxxs”와 함께 새 레벨 화면,

아니면 이전 기록 유지하면서 “Total xxxs”만 표시.

모드 선택 화면 상단에는 현재 모드와 함께 BestLvX 형태로 최고 레벨을 항상 보여줘서

게임처럼 “오늘은 레벨 몇까지 찍었는지” 바로 확인 가능.

이 코드 그대로 exercise_timer.py로 저장해서 기존 파일을 교체하고,
DHT 포트(D7), PIR(D2), Buzzer(D3), 버튼 핀(22,23,24,25)이 지금 배선과 맞는지 한 번만 확인해서 돌리면 돼.